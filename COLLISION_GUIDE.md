# 타일 충돌 경계 수정 가이드

## 📍 수정 위치

**파일: `tile.py` (95-114줄)**

```python
COLLISION_BOXES = {
    TileType.OCEAN: None,                      # 충돌 없음
    TileType.TOP_LEFT: [(0, 0, 64, 64)],       # 1개 박스
    TileType.CENTER: [(0, 0, 32, 64), (32, 0, 64, 32)],  # 2개 박스
    TileType.STAIR_UP_RIGHT: [(0, 0, 64, 32)], # 하단 절반만
    # ...
}
```

**⭐ 이제 한 타일에 여러 개의 충돌박스 사용 가능!**

---

## 🔧 충돌박스 설정 방법

### 좌표 형식 (리스트로 감싸기!)
```python
[(left, bottom, right, top)]  # 1개
[(box1), (box2), (box3)]      # 여러 개
```
- **left**: 타일 왼쪽에서 충돌 시작점 (0~64)
- **bottom**: 타일 아래에서 충돌 시작점 (0~64)
- **right**: 타일 왼쪽에서 충돌 끝점 (0~64)
- **top**: 타일 아래에서 충돌 끝점 (0~64)

### 예시

```python
# 1. 전체 타일 충돌 (1개)
TileType.CENTER: [(0, 0, 64, 64)]

# 2. 충돌 없음
TileType.OCEAN: None

# 3. 하단 절반만 (1개)
TileType.STAIR: [(0, 0, 64, 32)]

# 4. 상단 절반만 (1개)
TileType.PLATFORM: [(0, 32, 64, 64)]

# 5. 좌우 분리 (2개) ⭐ 새기능!
TileType.SPLIT: [(0, 0, 32, 64), (32, 0, 64, 64)]

# 6. L자 모양 (2개) ⭐
TileType.L_SHAPE: [(0, 0, 32, 64), (0, 0, 64, 32)]

# 7. 상하 분리 (2개) ⭐
TileType.TOP_BOTTOM: [(0, 0, 64, 20), (0, 44, 64, 64)]

# 8. 3개 박스 (기둥+바닥) ⭐
TileType.COMPLEX: [(0, 0, 64, 16), (24, 16, 40, 64), (0, 48, 64, 64)]
```

---

## 📝 수정 절차

### 1단계: tile.py 열기
```bash
vim tile.py
# 또는 에디터에서 95-114줄로 이동
```

### 2단계: 원하는 타일 찾기
```python
# 예: CENTER 타일의 충돌을 상단만으로 변경
TileType.CENTER: (0, 0, 64, 64),  # 변경 전
```

### 3단계: 충돌박스 수정
```python
TileType.CENTER: (0, 32, 64, 64),  # 변경 후 (상단 절반만)
```

### 4단계: 게임 재실행
```bash
python main.py
```

### 5단계: F3으로 확인
- F3 키로 타일맵 디버그 모드 활성화
- 빨간 박스가 수정된 충돌 영역

---

## 🎯 실전 예제

### 계단 타일 수정 (더 쉽게 올라가게)
```python
# 기존: 하단 32픽셀
TileType.STAIR_UP_RIGHT: (0, 0, 64, 32),

# 수정: 하단 16픽셀만 (더 쉽게 올라감)
TileType.STAIR_UP_RIGHT: (0, 0, 64, 16),
```

### 벽 타일을 통과 가능하게
```python
# 기존: 전체 충돌
TileType.LEFT: (0, 0, 64, 64),

# 수정: 충돌 없음
TileType.LEFT: None,
```

### 특정 타일만 일부 충돌
```python
# 예: CENTER 타일 중앙 32x32만 충돌
TileType.CENTER: (16, 16, 48, 48),
```

---

## 🗺️ 맵 수정

**파일: `map_data.py`**

```python
TEST_MAP_WITH_STAIRS = [
    [1, 2, 2, 3],  # 최상단 행
    [4, 5, 5, 6],  # 중간 행
    [7, 8, 8, 9],  # 최하단 행
]
```

각 숫자는 타일 번호:
- 0 = OCEAN (바다)
- 1-9 = 타일맵 9종
- 10 = 우상향 계단
- 11 = 좌상향 계단
- 12-17 = 파도/절벽

---

## 🔍 디버그 방법

1. **게임 실행**
   ```bash
   python main.py
   ```

2. **F3 키 누르기**
   - 회색 박스: 타일 전체 영역
   - 빨간 박스: 실제 충돌 영역

3. **충돌 테스트**
   - 방향키로 캐릭터 이동
   - 충돌 영역에 닿으면 못 지나감

4. **수정 후 재확인**
   - 게임 종료 (ESC)
   - tile.py 수정
   - 재실행

---

## ⚠️ 주의사항

1. **좌표는 0~64 범위 내**
   - left < right
   - bottom < top

2. **None = 충돌 없음**
   - 장식 타일, 배경용

3. **변경 후 반드시 재실행**
   - Python은 파일 수정 시 재실행 필요

4. **F3으로 시각적 확인**
   - 빨간 박스 확인 필수

---

이제 `tile.py`의 95-114줄만 수정하면 됩니다!
